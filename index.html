<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CanlÄ± AltÄ±n & DÃ¶viz Paneli</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  .card { transition: transform 0.2s, background 0.2s; }
  .card:hover { transform: scale(1.05); background: rgba(255,255,255,0.15); }
  .trend-up { color: #4ade80; }
  .trend-down { color: #f87171; }
</style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white min-h-screen flex items-center justify-center">
<div id="root" class="w-full max-w-5xl p-6 text-center"></div>

<script>
let prevData = {};
const API_URL = 'https://altin-backend1905.vercel.app/api/altin';

async function fetchData() {
  const root = document.getElementById('root');
  root.innerHTML = '<div class="text-center text-xl">YÃ¼kleniyorâ€¦</div>';

  try {
    const response = await fetch(API_URL);
    const json = await response.json();

    const data = {
      gold: json?.GRA?.Selling ?? '--',
      silver: json?.GUMUS?.Selling ?? '--',
      usd: json?.USD?.Selling ?? '--',
      eur: json?.EUR?.Selling ?? '--'
    };

    const getTrendClass = (key) => {
      if (!prevData[key]) return '';
      if (data[key] === '--') return '';
      if (data[key] > prevData[key]) return 'trend-up';
      if (data[key] < prevData[key]) return 'trend-down';
      return '';
    };

    prevData = {...data};

    root.innerHTML = `
      <h1 class="text-3xl font-bold mb-6 text-center">ğŸ“Š CanlÄ± AltÄ±n & DÃ¶viz</h1>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <div class="card bg-white/10 backdrop-blur rounded-2xl p-6 text-center">
          <div class="text-xl">ğŸª™ Gram AltÄ±n</div>
          <div class="mt-3 text-2xl font-bold ${getTrendClass('gold')}">${data.gold} â‚º</div>
        </div>
        <div class="card bg-white/10 backdrop-blur rounded-2xl p-6 text-center">
          <div class="text-xl">ğŸ¥ˆ Gram GÃ¼mÃ¼ÅŸ</div>
          <div class="mt-3 text-2xl font-bold ${getTrendClass('silver')}">${data.silver} â‚º</div>
        </div>
        <div class="card bg-white/10 backdrop-blur rounded-2xl p-6 text-center">
          <div class="text-xl">ğŸ’µ Dolar</div>
          <div class="mt-3 text-2xl font-bold ${getTrendClass('usd')}">${data.usd} â‚º</div>
        </div>
        <div class="card bg-white/10 backdrop-blur rounded-2xl p-6 text-center">
          <div class="text-xl">ğŸ’¶ Euro</div>
          <div class="mt-3 text-2xl font-bold ${getTrendClass('eur')}">${data.eur} â‚º</div>
        </div>
      </div>
      <div class="mt-6 text-center text-sm opacity-70">Son gÃ¼ncelleme: ${new Date().toLocaleTimeString('tr-TR')}</div>
    `;
  } catch (e) {
    root.innerHTML = '<div class="text-red-500 text-center">âŒ Veri Ã§ekilemedi / Backend veya aÄŸ sorunu</div>';
    console.error(e);
  }
}

fetchData();
setInterval(fetchData, 5000);
</script>
</body>
</html>
